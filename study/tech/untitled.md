---
hidden: true
---

# Untitled

## 서론. 이 글을 작성하게 된 이유

이벤트를 어떻게 이해해야 할까?\
이번에 주문·결제·쿠폰·유저 행동 추적 기능을 구현하면서,\
가장 먼저 정의한건 아래와 같습니다.

> 이벤트는 “누군가 관심을 가지고 있어야 의미가 있는 과거의 사건”이다.

“결제가 완료되었다”, “주문이 생성되었다”, “좋아요가 눌렸다” 같은 일들은\
그 자체로도 의미가 있지만, 사실 더 중요한 건 "이 사건에 누가 관심을 가지는가" 라고 생각합니다.

* 결제 완료: 주문 도메인, 포인트 도메인, 쿠폰 도메인 등
* 좋아요 변경: 상품 통계, 캐시 업데이트, 추천 시스템, 유저 행동 분석 등

이벤트를 도입하기 전의 코드는 보통 이렇게 흘러갑니다.

* 주문 서비스가 결제, 포인트, 쿠폰, 재고, 로그 전송까지 모두 직접 호출한다.
* 한 메서드 안에서 여러 도메인의 관심사가 뒤섞인다.
* 새로운 요구사항이 생기면, 항상 기존 코드를 다시 열어봐야 한다.

이 구조의 공통점은, “모든 관심사를 한 곳에서 직접 관리하려고 한다”는 것에 있었습니다.

그래서 이번 기능들을 구현하면서 의식적으로 이런 질문들이 나왔습니다.

* 이 사건을 “알고만 있으면 되는” 사람은 누구인가?
* 이 사건에 “관심이 있는” 주체는 어디까지인가?
* 그렇다면, 이 사건을 그들에게 “알린다”는 것을 코드로 어떻게 표현할 것인가?

그 과정에서 자연스럽게 이벤트를 도입하게 되었습니다.

* 도메인 객체가 “이런 일이 일어났다”고 알리는 도메인 이벤트
* 응용 계층이 “사용자가 이런 행동을 했다”고 알리는 사용자 행동 이벤트
* 이 둘을 “관심 있는 쪽”에서만 받아 처리하도록 분리하는 구조

이번에 작성하는 글은 그런 고민의 과정을 정리한 글입니다.\
이벤트를 거창한 기술이나 패턴이 아니라,

> “어떤 사건을, 누구에게까지 알려줄 것인가”\
> 를 코드로 표현하는 방법

으로 바라보며 설계해 본 경험을 공유하려 합니다.

